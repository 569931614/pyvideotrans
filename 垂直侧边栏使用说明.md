# 垂直侧边栏使用说明

## ✅ 已完成的功能

### 1. 新启动图 🎨

**位置**: `videotrans/styles/logo_new.jpeg`

**特性**:
- 自动加载新的JPEG启动图
- 如果JPEG不存在，自动回退到原PNG
- 原启动图已备份为 `logo_backup.png`

**代码位置**: `sp.py` 第39-48行

### 2. 垂直侧边栏 📱

**文件**: `videotrans/ui/sidebar.py`

**设计特点**:
- 现代化深色主题
- 固定宽度220px
- 渐变背景效果
- 自定义滚动条
- 响应式hover效果

---

## 🎨 侧边栏功能

### 功能分组

#### 1. 智能摘要组

**🎯 HearSight**
- 功能：基于Whisper识别结果生成智能段落划分和LLM摘要
- 提示：需要先完成语音识别并生成SRT字幕
- 点击：打开HearSight处理对话框

**⚙️ 摘要配置**
- 功能：配置HearSight的LLM参数、提示词等设置
- 点击：打开配置对话框

**📚 摘要管理**
- 功能：查看和管理视频摘要库
- 特性：支持搜索、导出和删除
- 点击：打开摘要管理器

#### 2. 界面切换组

**🌐 HTML UI**
- 功能：切换到现代化HTML界面
- 特性：基于Web技术的全新用户体验
- 状态：可选中/取消选中

**📋 原始界面**
- 功能：切换回传统Qt界面
- 状态：默认选中

#### 3. 工具组

**⚙️ 设置**
- 功能：应用程序设置和高级选项
- 点击：打开设置对话框

**ℹ️ 关于**
- 功能：显示应用信息
- 点击：显示关于对话框

---

## 🎯 使用方法

### 启动应用

```bash
cd F:\智能体定制\20250904translateVideo\pyvideotrans
python sp.py
```

### 界面布局

```
┌────────────┬─────────────────────────────┐
│            │                             │
│  侧边栏    │      主内容区域              │
│  (220px)   │                             │
│            │                             │
│  📚 智能摘要│                             │
│  🎯 HearSight                            │
│  ⚙️ 摘要配置│                             │
│  📚 摘要管理│                             │
│            │                             │
│  🌐 界面   │                             │
│  🌐 HTML UI│                             │
│  📋 原始界面│                             │
│            │                             │
│  🔧 工具   │                             │
│  ⚙️ 设置   │                             │
│  ℹ️ 关于   │                             │
│            │                             │
└────────────┴─────────────────────────────┘
```

### 功能操作

#### 1. 使用智能摘要

1. 点击侧边栏的 **🎯 HearSight**
2. 选择SRT字幕文件
3. 配置LLM参数（如需要）
4. 点击"开始处理"
5. 等待处理完成

#### 2. 查看摘要管理

1. 点击侧边栏的 **📚 摘要管理**
2. 浏览视频列表
3. 查看整体摘要和段落详情
4. 使用搜索功能查找相关内容
5. 导出或删除摘要

#### 3. 切换界面

**切换到HTML UI**:
1. 点击侧边栏的 **🌐 HTML UI**
2. 界面自动切换到HTML版本
3. 按钮显示选中状态

**切换回原始界面**:
1. 点击侧边栏的 **📋 原始界面**
2. 界面切换回Qt版本
3. 按钮显示选中状态

---

## 🎨 设计细节

### 颜色方案

**背景**:
- 主背景：渐变 `#0f1419` → `#0a0e13`
- 按钮hover：`rgba(99, 102, 241, 0.15)`
- 按钮选中：`rgba(99, 102, 241, 0.2)`

**文字**:
- 主标题：`#e8eef7` (亮白)
- 描述文字：`#6b7280` (灰色)
- 分组标题：`#6b7280` (灰色，大写)

**强调色**:
- 主色：`#6366f1` (靛蓝)
- hover：`#818cf8` (浅靛蓝)
- 选中：`#a5b4fc` (更浅靛蓝)

### 按钮样式

**默认状态**:
- 背景：透明
- 文字：`#e8eef7`
- 圆角：8px
- 高度：44px

**Hover状态**:
- 背景：`rgba(99, 102, 241, 0.15)`
- 文字：`#818cf8`

**选中状态**:
- 背景：`rgba(99, 102, 241, 0.2)`
- 文字：`#a5b4fc`
- 左边框：3px `#6366f1`

### 滚动条样式

**轨道**:
- 背景：透明
- 宽度：8px

**滑块**:
- 背景：`rgba(255, 255, 255, 0.1)`
- 圆角：4px
- hover：`rgba(255, 255, 255, 0.15)`

---

## 🔧 技术实现

### 组件结构

```python
Sidebar (主容器)
├── QScrollArea (滚动区域)
│   └── QWidget (内容容器)
│       ├── Logo区域
│       ├── SidebarSection (智能摘要)
│       │   ├── SidebarButton (HearSight)
│       │   ├── SidebarButton (摘要配置)
│       │   └── SidebarButton (摘要管理)
│       ├── SidebarSeparator
│       ├── SidebarSection (界面)
│       │   ├── SidebarButton (HTML UI)
│       │   └── SidebarButton (原始界面)
│       ├── SidebarSeparator
│       ├── SidebarSection (工具)
│       │   ├── SidebarButton (设置)
│       │   └── SidebarButton (关于)
│       └── 版本信息
```

### 信号连接

```python
# 侧边栏信号
sidebar.hearsight_clicked → open_hearsight()
sidebar.config_clicked → open_hearsight_config()
sidebar.summary_clicked → open_summary_manager()
sidebar.html_ui_clicked → _toggle_html_ui_from_sidebar(True)
sidebar.qt_ui_clicked → _toggle_html_ui_from_sidebar(False)
sidebar.settings_clicked → open_settings()
sidebar.about_clicked → show_about()
```

### 状态同步

**HTML UI切换**:
- 工具栏按钮 ↔ 侧边栏按钮
- 双向同步选中状态
- 自动更新界面显示

---

## 📝 文件清单

### 新增文件

1. **`videotrans/ui/sidebar.py`** (300行)
   - Sidebar主组件
   - SidebarButton按钮组件
   - SidebarSeparator分隔线
   - SidebarSection分组标题

2. **`videotrans/styles/logo_new.jpeg`**
   - 新的启动图

3. **`videotrans/styles/logo_backup.png`**
   - 原启动图备份

### 修改文件

1. **`sp.py`**
   - 支持JPEG启动图
   - 自动回退机制

2. **`videotrans/mainwin/_main_win.py`**
   - 添加`_init_sidebar()`方法
   - 添加`_toggle_html_ui_from_sidebar()`方法
   - 添加`open_settings()`方法
   - 添加`show_about()`方法
   - 修改`_toggle_html_ui()`同步侧边栏状态

---

## 🎯 优势对比

### 之前（工具栏）

```
[🎯] [⚙️] [📚] | [🌐 HTML UI] | [其他...]
```

**问题**:
- ❌ 按钮拥挤
- ❌ 功能分组不清晰
- ❌ 扩展性有限
- ❌ 视觉层次不明显

### 现在（垂直侧边栏）

```
┌─────────────┐
│ 智能摘要     │
│ 🎯 HearSight│
│ ⚙️ 摘要配置  │
│ 📚 摘要管理  │
├─────────────┤
│ 界面        │
│ 🌐 HTML UI  │
│ 📋 原始界面  │
├─────────────┤
│ 工具        │
│ ⚙️ 设置     │
│ ℹ️ 关于     │
└─────────────┘
```

**优势**:
- ✅ 功能分组清晰
- ✅ 视觉层次分明
- ✅ 易于扩展
- ✅ 现代化设计
- ✅ 更好的用户体验

---

## 🚀 未来扩展

### 可添加的功能

1. **收藏夹**
   - 常用视频快速访问
   - 自定义分组

2. **最近使用**
   - 最近处理的视频
   - 快速重新打开

3. **主题切换**
   - 深色/浅色主题
   - 自定义颜色

4. **快捷键**
   - 键盘快捷键支持
   - 自定义快捷键

5. **搜索功能**
   - 全局搜索
   - 快速导航

---

## 💡 使用建议

### 最佳实践

1. **功能探索**
   - 逐个点击侧边栏按钮
   - 熟悉各功能位置
   - 了解tooltip提示

2. **界面切换**
   - 尝试HTML UI和原始界面
   - 选择适合自己的界面
   - 根据任务切换界面

3. **摘要管理**
   - 定期查看摘要库
   - 清理不需要的摘要
   - 导出重要摘要

4. **配置优化**
   - 根据需求调整LLM参数
   - 优化段落合并设置
   - 保存常用配置

---

## 🔗 相关文档

- **侧边栏优化和启动图说明.md** - 设计方案和实现细节
- **HEARSIGHT_使用指南.md** - HearSight功能说明
- **HEARSIGHT_摘要管理使用指南.md** - 摘要管理详细说明
- **HTML_UI_优化说明.md** - HTML UI功能说明

---

## 📞 反馈和支持

如果您在使用过程中遇到问题或有改进建议，请：

1. 查看相关文档
2. 检查控制台日志
3. 提交Issue到GitHub
4. 联系开发团队

---

**享受全新的侧边栏体验！** 🎉

