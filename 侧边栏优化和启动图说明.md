# 侧边栏优化和启动图说明

## 📍 启动图位置

### 当前启动图文件

**位置**: `videotrans/styles/logo.png`

**使用位置**: `sp.py` 第40行
```python
self.pixmap = QPixmap("./videotrans/styles/logo.png")
```

**当前配置**:
- 尺寸: 560x350 像素
- 格式: PNG
- 显示文字: "pyVideoTrans {VERSION} Loading..."
- 样式: 无边框、透明背景、居中显示

### 如何更换启动图

1. **准备新的启动图**:
   - 推荐尺寸: 560x350 像素（或保持16:9比例）
   - 格式: PNG（支持透明背景）
   - 建议: 深色背景，白色文字区域

2. **替换文件**:
   ```bash
   # 备份原文件
   cp videotrans/styles/logo.png videotrans/styles/logo_backup.png
   
   # 替换为新文件
   cp your_new_logo.png videotrans/styles/logo.png
   ```

3. **修改启动文字**（可选）:
   编辑 `sp.py` 第51行：
   ```python
   self.status_label = QLabel(f"您的应用名称 {VERSION} 加载中...")
   ```

---

## 🎨 侧边栏布局优化方案

### 当前问题分析

根据您的截图，当前界面存在以下问题：

1. **左侧侧边栏过于拥挤**
   - "智能摘要"按钮
   - "HTML UI"按钮
   - 其他功能按钮
   - 缺少视觉层次和分组

2. **按钮样式不统一**
   - 有些按钮有图标，有些没有
   - 颜色和大小不一致
   - 缺少hover效果

3. **空间利用不合理**
   - 按钮之间间距不均匀
   - 没有明确的功能分组

### 优化方案

#### 方案1: 垂直侧边栏（推荐）

**特点**: 
- 清晰的功能分组
- 图标+文字的组合
- 现代化的卡片式设计

**布局结构**:
```
┌─────────────────┐
│  📚 智能摘要     │  ← 主要功能区
│  🎯 HearSight   │
│  ⚙️  配置        │
├─────────────────┤
│  🌐 HTML UI     │  ← 界面切换区
│  📋 原始界面     │
├─────────────────┤
│  📁 文件管理     │  ← 工具区
│  ⚙️  设置        │
└─────────────────┘
```

#### 方案2: 顶部工具栏（当前方案优化）

**特点**:
- 保持当前的工具栏布局
- 优化按钮样式和间距
- 添加分隔符和分组

**布局结构**:
```
[🎯 智能摘要] [⚙️] [📚] | [🌐 HTML UI] | [其他工具...]
    ↑ 智能摘要组      ↑ 界面切换    ↑ 其他功能
```

---

## 🔧 实现方案1: 垂直侧边栏

### 1. 创建侧边栏组件

创建新文件 `videotrans/ui/sidebar.py`:

```python
from PySide6.QtWidgets import (
    QWidget, QVBoxLayout, QPushButton, QLabel, QFrame
)
from PySide6.QtCore import Qt, Signal
from PySide6.QtGui import QIcon


class SidebarButton(QPushButton):
    """侧边栏按钮组件"""
    
    def __init__(self, icon, text, tooltip="", parent=None):
        super().__init__(parent)
        self.setText(f"{icon}  {text}")
        self.setToolTip(tooltip)
        self.setCursor(Qt.PointingHandCursor)
        self.setStyleSheet("""
            QPushButton {
                background: transparent;
                color: #e8eef7;
                border: none;
                border-radius: 8px;
                padding: 12px 16px;
                text-align: left;
                font-size: 14px;
                font-weight: 500;
            }
            QPushButton:hover {
                background: rgba(99, 102, 241, 0.1);
                color: #6366f1;
            }
            QPushButton:pressed {
                background: rgba(99, 102, 241, 0.2);
            }
        """)


class SidebarSeparator(QFrame):
    """侧边栏分隔线"""
    
    def __init__(self, parent=None):
        super().__init__(parent)
        self.setFrameShape(QFrame.HLine)
        self.setStyleSheet("""
            QFrame {
                background: rgba(255, 255, 255, 0.1);
                max-height: 1px;
                margin: 8px 12px;
            }
        """)


class Sidebar(QWidget):
    """主侧边栏组件"""
    
    # 信号
    hearsight_clicked = Signal()
    config_clicked = Signal()
    summary_clicked = Signal()
    html_ui_clicked = Signal()
    settings_clicked = Signal()
    
    def __init__(self, parent=None):
        super().__init__(parent)
        self.init_ui()
    
    def init_ui(self):
        """初始化UI"""
        layout = QVBoxLayout(self)
        layout.setContentsMargins(0, 0, 0, 0)
        layout.setSpacing(4)
        
        # 标题
        title = QLabel("功能菜单")
        title.setStyleSheet("""
            QLabel {
                color: #a0abc0;
                font-size: 12px;
                font-weight: 600;
                padding: 16px 16px 8px 16px;
                text-transform: uppercase;
                letter-spacing: 1px;
            }
        """)
        layout.addWidget(title)
        
        # 智能摘要组
        self.hearsight_btn = SidebarButton(
            "🎯", "智能摘要",
            "基于Whisper识别结果生成智能段落划分和LLM摘要"
        )
        self.hearsight_btn.clicked.connect(self.hearsight_clicked.emit)
        layout.addWidget(self.hearsight_btn)
        
        self.config_btn = SidebarButton(
            "⚙️", "摘要配置",
            "配置HearSight参数"
        )
        self.config_btn.clicked.connect(self.config_clicked.emit)
        layout.addWidget(self.config_btn)
        
        self.summary_btn = SidebarButton(
            "📚", "摘要管理",
            "查看和管理视频摘要库"
        )
        self.summary_btn.clicked.connect(self.summary_clicked.emit)
        layout.addWidget(self.summary_btn)
        
        # 分隔线
        layout.addWidget(SidebarSeparator())
        
        # 界面切换组
        interface_title = QLabel("界面")
        interface_title.setStyleSheet(title.styleSheet())
        layout.addWidget(interface_title)
        
        self.html_ui_btn = SidebarButton(
            "🌐", "HTML UI",
            "切换到现代化HTML界面"
        )
        self.html_ui_btn.clicked.connect(self.html_ui_clicked.emit)
        self.html_ui_btn.setCheckable(True)
        layout.addWidget(self.html_ui_btn)
        
        # 分隔线
        layout.addWidget(SidebarSeparator())
        
        # 工具组
        tools_title = QLabel("工具")
        tools_title.setStyleSheet(title.styleSheet())
        layout.addWidget(tools_title)
        
        self.settings_btn = SidebarButton(
            "⚙️", "设置",
            "应用设置"
        )
        self.settings_btn.clicked.connect(self.settings_clicked.emit)
        layout.addWidget(self.settings_btn)
        
        # 底部弹簧
        layout.addStretch()
        
        # 设置侧边栏样式
        self.setStyleSheet("""
            Sidebar {
                background: #0f1419;
                border-right: 1px solid rgba(255, 255, 255, 0.1);
                min-width: 200px;
                max-width: 200px;
            }
        """)
```

### 2. 集成到主窗口

修改 `videotrans/mainwin/_main_win.py`:

```python
def initUI(self):
    # ... 现有代码 ...
    
    # 创建侧边栏（如果需要）
    if config.settings.get('use_sidebar', False):
        self._create_sidebar()

def _create_sidebar(self):
    """创建侧边栏"""
    from videotrans.ui.sidebar import Sidebar
    
    # 创建侧边栏
    self.sidebar = Sidebar(self)
    
    # 连接信号
    self.sidebar.hearsight_clicked.connect(self.open_hearsight)
    self.sidebar.config_clicked.connect(self.open_hearsight_config)
    self.sidebar.summary_clicked.connect(self.open_summary_manager)
    self.sidebar.html_ui_clicked.connect(self._toggle_html_ui)
    self.sidebar.settings_clicked.connect(self.open_settings)
    
    # 添加到主布局
    # 需要重新组织主窗口布局
    main_widget = QWidget()
    main_layout = QHBoxLayout(main_widget)
    main_layout.setContentsMargins(0, 0, 0, 0)
    main_layout.setSpacing(0)
    
    # 添加侧边栏
    main_layout.addWidget(self.sidebar)
    
    # 添加原有的中央部件
    main_layout.addWidget(self.centralwidget)
    
    # 替换中央部件
    self.setCentralWidget(main_widget)
```

---

## 🔧 实现方案2: 优化当前工具栏

### 修改 `videotrans/mainwin/_main_win.py`

在 `_init_hearsight()` 方法中优化按钮样式：

```python
def _init_hearsight(self):
    """初始化HearSight"""
    try:
        # ... 现有代码 ...
        
        # 统一的按钮样式
        button_style = """
            QPushButton {
                background: qlineargradient(x1:0, y1:0, x2:0, y2:1,
                    stop:0 {color1}, stop:1 {color2});
                color: white;
                border: none;
                border-radius: 8px;
                font-size: 16px;
                min-width: 42px;
                min-height: 42px;
                max-width: 42px;
                max-height: 42px;
            }
            QPushButton:hover {
                background: qlineargradient(x1:0, y1:0, x2:0, y2:1,
                    stop:0 {hover1}, stop:1 {hover2});
            }
            QPushButton:pressed {
                background: qlineargradient(x1:0, y1:0, x2:0, y2:1,
                    stop:0 {press1}, stop:1 {press2});
            }
        """
        
        # HearSight按钮 - 绿色
        self.hearsight_btn = QPushButton("🎯")
        self.hearsight_btn.setToolTip("智能摘要\n基于Whisper识别结果生成智能段落划分和LLM摘要")
        self.hearsight_btn.setStyleSheet(button_style.format(
            color1="#28a745", color2="#218838",
            hover1="#34b752", hover2="#28a745",
            press1="#1e7e34", press2="#1a6e2e"
        ))
        self.hearsight_btn.clicked.connect(self.open_hearsight)
        self.hearsight_btn.setCursor(Qt.PointingHandCursor)
        
        # 配置按钮 - 灰色
        self.hearsight_config_btn = QPushButton("⚙️")
        self.hearsight_config_btn.setToolTip("HearSight配置")
        self.hearsight_config_btn.setStyleSheet(button_style.format(
            color1="#7c8a99", color2="#6c757d",
            hover1="#8a98a7", hover2="#7a8290",
            press1="#5a6268", press2="#4a5258"
        ))
        self.hearsight_config_btn.clicked.connect(self.open_hearsight_config)
        self.hearsight_config_btn.setCursor(Qt.PointingHandCursor)
        
        # 摘要管理按钮 - 蓝色
        self.summary_manager_btn = QPushButton("📚")
        self.summary_manager_btn.setToolTip("摘要管理\n查看和管理视频摘要库")
        self.summary_manager_btn.setStyleSheet(button_style.format(
            color1="#5aa9ff", color2="#4a9eff",
            hover1="#6ab9ff", hover2="#5aa9ff",
            press1="#3a8eef", press2="#2a7edf"
        ))
        self.summary_manager_btn.clicked.connect(self.open_summary_manager)
        self.summary_manager_btn.setCursor(Qt.PointingHandCursor)
        
        # 添加到工具栏，使用分隔符分组
        if hasattr(self, 'toolBar'):
            self.toolBar.addSeparator()  # 分隔符
            
            # 智能摘要组
            self.toolBar.addWidget(self.hearsight_btn)
            self.toolBar.addWidget(self.hearsight_config_btn)
            self.toolBar.addWidget(self.summary_manager_btn)
            
            # 添加间距
            spacer = QWidget()
            spacer.setFixedWidth(20)
            self.toolBar.addWidget(spacer)
    
    except Exception as e:
        print(f"添加HearSight按钮失败: {e}")
```

---

## 📊 对比总结

| 特性 | 方案1: 垂直侧边栏 | 方案2: 优化工具栏 |
|------|------------------|------------------|
| **实现难度** | 中等（需要重构布局） | 简单（修改现有代码） |
| **视觉效果** | ⭐⭐⭐⭐⭐ 现代化 | ⭐⭐⭐ 传统 |
| **空间利用** | 占用左侧固定宽度 | 占用顶部空间 |
| **功能分组** | ⭐⭐⭐⭐⭐ 清晰 | ⭐⭐⭐ 一般 |
| **扩展性** | ⭐⭐⭐⭐⭐ 易扩展 | ⭐⭐⭐ 有限 |
| **用户习惯** | 需要适应 | 符合现有习惯 |

---

## 🎯 推荐实施步骤

### 短期（立即实施）- 方案2

1. ✅ 优化当前工具栏按钮样式
2. ✅ 统一按钮尺寸和间距
3. ✅ 添加分隔符和分组
4. ✅ 优化tooltip提示

### 中期（可选）- 方案1

1. 创建侧边栏组件
2. 集成到主窗口
3. 添加配置选项（允许用户切换）
4. 测试和优化

---

## 📝 启动图自定义建议

### 设计要点

1. **品牌元素**:
   - 应用Logo
   - 应用名称
   - 版本号

2. **视觉风格**:
   - 深色背景（与主界面一致）
   - 简洁的图标或插画
   - 清晰的文字

3. **技术要求**:
   - 尺寸: 560x350 或 16:9 比例
   - 格式: PNG（支持透明）
   - 文件大小: < 500KB

### 示例设计

```
┌─────────────────────────────────┐
│                                 │
│         [应用Logo图标]           │
│                                 │
│      pyVideoTrans v3.0         │
│                                 │
│         Loading...              │
│                                 │
└─────────────────────────────────┘
```

---

## 🔗 相关文件

- 启动图: `videotrans/styles/logo.png`
- 启动代码: `sp.py` (第30-61行)
- 主窗口: `videotrans/mainwin/_main_win.py`
- 工具栏初始化: `_init_hearsight()` 方法 (第803-901行)
- 样式文件: `videotrans/styles/style.qss`

---

需要我帮您实现哪个方案？或者您有其他的优化想法？

